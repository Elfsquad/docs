"use strict";(self.webpackChunkelfsquad=self.webpackChunkelfsquad||[]).push([["80005"],{72320:function(e,t,n){n.r(t),n.d(t,{frontMatter:()=>r,default:()=>u,toc:()=>c,metadata:()=>o,assets:()=>d,contentTitle:()=>s});var o=JSON.parse('{"id":"configurator/iframe-api","title":"Showroom IFrame API","description":"The easiest way to embed the Elfsquad showroom application into your existing website, is to leverage the HTML iframe APIs.","source":"@site/docs/configurator/iframe-api.md","sourceDirName":"configurator","slug":"/configurator/iframe-api","permalink":"/docs/configurator/iframe-api","draft":false,"unlisted":false,"editUrl":"https://github.com/elfsquad/docs/edit/main/docs/configurator/iframe-api.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Showroom IFrame API","sidebar_position":2,"sidebar_label":"Showroom IFrame API"},"sidebar":"configuratorSidebar","previous":{"title":"Overview","permalink":"/docs/configurator/"},"next":{"title":"Visualization IFrame API","permalink":"/docs/configurator/Third-party-visualization"}}'),i=n(85893),a=n(50065);let r={title:"Showroom IFrame API",sidebar_position:2,sidebar_label:"Showroom IFrame API"},s=void 0,d={},c=[{value:"Override default &#39;Add to quotation&#39; action",id:"override-default-add-to-quotation-action",level:2}];function l(e){let t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"The easiest way to embed the Elfsquad showroom application into your existing website, is to leverage the HTML iframe APIs."}),"\n",(0,i.jsxs)(t.p,{children:["To embed the product selection page, you point to the ",(0,i.jsx)(t.code,{children:"/products"})," endpoint. In case of the Automotive demo environment this would look like:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:'<iframe src="https://automotive.elfsquad.io/products"></iframe>\n'})}),"\n",(0,i.jsxs)(t.p,{children:["You can also directly embed a the configurator for a specific model by pointing to the ",(0,i.jsx)(t.code,{children:"/configure/{PRODUCT_NAME}"})," endpoint. For example:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:'<iframe src="https://automotive.elfsquad.io/configure/Elfsquad carrosserie"></iframe>\n'})}),"\n",(0,i.jsx)(t.h2,{id:"override-default-add-to-quotation-action",children:"Override default 'Add to quotation' action"}),"\n",(0,i.jsx)(t.p,{children:"Sometimes it might not be enough to just embed the showroom, and you want to override the existing 'Add to quotation' action. This could for example be useful if you are embedding the showroom in an existing ecommerce platform, and only want to leverage the Elfsquad configuration capabilities."}),"\n",(0,i.jsxs)(t.p,{children:["To do this you can add the ",(0,i.jsx)(t.code,{children:"?orderentry=true"})," query parameter to the iframe src. For example:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:'<iframe src="https://automotive.elfsquad.io/configure/Elfsquad carrosserie?orderentry=true"></iframe>\n'})}),"\n",(0,i.jsxs)(t.p,{children:["Now clicking on the default primary action 'Add to quotation' will no longer redirect the user to a overview page, but instead submit a message using the JavaScript ",(0,i.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage",children:"postMessage API"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"To listen to this message, you could do something like:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:"window.addEventListener('message', function (e) {\n    try {\n        var messageObject = JSON.parse(e.data);\n        if (!messageObject) return;\n        if (messageObject['action'] != 'createQuotation') return;\n        onQuotationRequested(messageObject['argument']);\n    } catch { }\n}, false);\n"})}),"\n",(0,i.jsx)(t.p,{children:"A complete example embedding the Automotive showroom:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:"<!DOCTYPE html>\n<html lang=\"en\">\n\n    <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <title>Document</title>\n        <style>\n            body,\n            html {\n                width: 100%;\n                height: 100%;\n                margin: 0px;\n                padding: 0px;\n            }\n\n            body {\n                display: flex;\n                flex-direction: column;\n            }\n\n            iframe {\n                flex: 1;\n                border: none;\n            }\n        </style>\n    </head>\n\n    <body>\n\n        <iframe src=\"https://automotive.elfsquad.io/configure/Elfsquad carrosserie?orderentry=true\"></iframe>\n        <script>\n            // TODO: change these fields\n            const TENANT_ID = '6fd356f8-b46f-4683-825d-cc17cc7fb73d'; // This ID can be found on the Integrations page of the EMS (https://ems.elfsquad.io/integration).\n            const ELFSQUAD_DOMAIN = 'https://automotive.elfsquad.io'\n\n            window.addEventListener('message', function (e) {\n                try {\n                    var messageObject = JSON.parse(e.data);\n                    if (!messageObject) return;\n                    if (messageObject['action'] != 'createQuotation') return;\n                    onQuotationRequested(messageObject['argument']);\n                } catch { }\n            }, false);\n\n            function onQuotationRequested(configurationId) {\n                getConfigurationOverview(configurationId);\n            }\n\n            function getConfigurationOverview(configurationId) {\n                fetch(`https://api.elfsquad.io/api/3.0/configurator/${configurationId}/overview`, {\n                    headers: {\n                        'x-elfsquad-id': TENANT_ID,\n                        'x-elfsquad-domain': ELFSQUAD_DOMAIN\n                    }\n                }).then(async (response) => {\n                    const overview = await response.json();\n                    console.log('overview', overview);\n                })\n            }\n        <\/script>\n    </body>\n\n</html>\n"})})]})}function u(e={}){let{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);