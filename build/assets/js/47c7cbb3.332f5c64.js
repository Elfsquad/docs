"use strict";(self.webpackChunkelfsquad=self.webpackChunkelfsquad||[]).push([["75961"],{17522:function(e,t,n){n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>u});var o=n(90953),i=n(85893),a=n(50065);let r={slug:"tutorial - using the API to create a configuration and add it to a quotation.",title:"Tutorial - Using the API to create a configuration and add it to a quotation.",author:"Anco Postma",author_title:"Tech lead @ Elfsquad",author_url:"https://github.com/AJJPostma",author_image_url:"https://avatars.githubusercontent.com/u/15011154?v=4",tags:["automation","configurator"]},s=void 0,d={authorsImageUrls:[void 0]},u=[{value:"1. Retrieve your configuration models",id:"1-retrieve-your-configuration-models",level:2},{value:"2. Start a new configuration",id:"2-start-a-new-configuration",level:2},{value:"3. Updating the configuration",id:"3-updating-the-configuration",level:2},{value:"4. Creating a new quotation",id:"4-creating-a-new-quotation",level:2},{value:"5. Adding the configuration to the quotation",id:"5-adding-the-configuration-to-the-quotation",level:2}];function l(e){let t={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"This guide explains how to start a new configuration, and update it, using the configurator API.\nIt will also explain how this configuration can be added to a (new) quotation."}),"\n",(0,i.jsx)(t.h2,{id:"1-retrieve-your-configuration-models",children:"1. Retrieve your configuration models"}),"\n",(0,i.jsx)(t.p,{children:"To ensure successful configuration, start by identifying the model you want to configure. You can retrieve a list of all available configuration models by sending the following request:"}),"\n",(0,i.jsxs)(t.p,{children:["GET: ",(0,i.jsx)(t.a,{href:"https://api.elfsquad.io/configurator/3/configurator/configurationmodels",children:"https://api.elfsquad.io/configurator/3/configurator/configurationmodels"})]}),"\n",(0,i.jsx)(t.p,{children:"The response will look something like the following:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  "categories": [],\n  "features": [\n    {\n      "featureModelId": "32915340-0924-409b-a938-f7024b3d883a",\n      "featureId": "dbe93c07-198c-449f-9f22-91c529a4d060",\n      "articleCode": "abc",\n      "name": "Product 1"\n    }\n  ],\n  "language": "en"\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["The featureModelId property, which uniquely identifies the configuration model, is essential for the next step. For more information about the response object, refer to the provided api documentation. ",(0,i.jsx)(t.a,{href:"https://docs.elfsquad.io/docs/spec/configurator/get-configuration-models",children:"https://docs.elfsquad.io/docs/spec/configurator/get-configuration-models"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"2-start-a-new-configuration",children:"2. Start a new configuration"}),"\n",(0,i.jsx)(t.p,{children:"Now that we know the id of our model, we can start a new configuration. This can be achieved by sending the following request:"}),"\n",(0,i.jsxs)(t.p,{children:["POST: ",(0,i.jsx)(t.a,{href:"https://api.elfsquad.io/configurator/3/configurator/new/%7BfeatureModelId%7D",children:"https://api.elfsquad.io/configurator/3/configurator/new/{featureModelId}"})]}),"\n",(0,i.jsx)(t.p,{children:"The featureModelId in this request is the same as the one retrieved in the previous step. Note: the id can also be found in the EMS.\nIt is also possible to send a body containing startup requirements when starting a new configuration. This body must have the following format:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  "startupRequirements": [\n    {\n      "nodeId": "123e4567-e89b-12d3-a456-426614174000",\n      "type": 0,\n      "value": 0\n    },\n    {\n      "nodeId": "123e4567-e89b-12d3-a456-426614174001",\n      "type": 1,\n      "value": 10\n    },\n    {\n      "nodeId": "123e4567-e89b-12d3-a456-426614174002",\n      "type": 2,\n      "value": "Some text"\n    },\n     {\n      "nodeId": "123e4567-e89b-12d3-a456-426614174003",\n      "type": 3,\n      "value": 5\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(t.p,{children:"Property explanation:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"nodeId:"})," The id of the node you want to change."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"type & value:"})," We currently support 3 different types:","\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Selection"}),"(0): When using a selection type requirement, sending a value of 0 will turn the specified node off. Any other value will turn the node on and change the value to the provided value. Only numeric values are supported."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Value"}),"(1): When using a value type requirement, the specified node will turn on (if not on already) and will have it's value changed to the provided value. Even when the value is 0. Only numeric values are supported."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Text"}),"(2): When using a text type requirement, the specified node will have it's textValue changed to the provided value. Only string values are supported."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Cardinality"}),"(3): When using a cardinality requirement, the specified linkedmodel node will have the specified amount off instances."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["The response body will contain the id of the newly created configuration. This id is needed for the other steps.\nFor more information about the request and response bodies, refer to the provided api documentation. ",(0,i.jsx)(t.a,{href:"https://docs.elfsquad.io/docs/spec/configurator/start-configuration-session",children:"https://docs.elfsquad.io/docs/spec/configurator/start-configuration-session"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"3-updating-the-configuration",children:"3. Updating the configuration"}),"\n",(0,i.jsx)(t.p,{children:"For further configuration changes, you can also utilize the configurator API. However, if you possess all required modifications beforehand, consider using the startup requirements covered earlier for optimal performance.\nUpdating numeric values can be done by sending the following request:"}),"\n",(0,i.jsxs)(t.p,{children:["PUT: ",(0,i.jsx)(t.a,{href:"https://api.elfsquad.io/configurator/3/configurator/%7BconfigurationId%7D/multiple",children:"https://api.elfsquad.io/configurator/3/configurator/{configurationId}/multiple"})]}),"\n",(0,i.jsx)(t.p,{children:"Note that configurationId is the id of the configuration created in the previous step. The request should contain a JSON body with an array of requirements that have the following format:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'[\n  {\n    "featureModelNodeId": "ad1e70a3-199a-4363-9b12-40472c568135",\n    "value": 0,\n    "isSelection": true\n  },\n  {\n    "featureModelNodeId": "ad1e70a3-199a-4363-9b12-40472c568136",\n    "value": 5,\n    "isSelection": false\n  }\n]\n'})}),"\n",(0,i.jsx)(t.p,{children:"Property explanation:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"featureModelNodeId"}),": The id of the node that has to be updated."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"value"}),": The value that has to be assigned to the specified node. Only numeric values are supported."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"isSelection"}),": When set to true, the requirement will behave like a selection type requirement from the previous step. Otherwise it will act like a value type requirement."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"A slightly different request has to be sent when updating text values:"}),"\n",(0,i.jsxs)(t.p,{children:["PUT: ",(0,i.jsx)(t.a,{href:"https://api.elfsquad.io/configurator/3/configurator/%7BconfigurationId%7D/text/multiple",children:"https://api.elfsquad.io/configurator/3/configurator/{configurationId}/text/multiple"})]}),"\n",(0,i.jsx)(t.p,{children:"The JSON body is also slightly different:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'[\n  {\n    "featureModelNodeId": "ad1e70a3-199a-4363-9b12-40472c568135",\n    "textValue": ""\n  },\n  {\n    "featureModelNodeId": "ad1e70a3-199a-4363-9b12-40472c568136",\n    "textValue": "Example Text"\n  }\n]\n'})}),"\n",(0,i.jsx)(t.p,{children:"Property explanation:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"featureModelNodeId"}),": The id of the node that has to be updated."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"textValue"}),": The text value that has to be assigned to the specified node. Only string values are supported."]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["For more information regarding the request and response bodies, refer to the provided api documentation. ",(0,i.jsx)(t.a,{href:"https://docs.elfsquad.io/docs/spec/configurator/update-requirement",children:"https://docs.elfsquad.io/docs/spec/configurator/update-requirement"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"4-creating-a-new-quotation",children:"4. Creating a new quotation"}),"\n",(0,i.jsx)(t.p,{children:"Before you can add the properly adjusted configuration to a quotation, you have to create a new quotation. This can be done using our quotation api. The api will automatically assign the correct quotation status and quotation number. This can be done by sending the following request:"}),"\n",(0,i.jsxs)(t.p,{children:["POST: ",(0,i.jsx)(t.a,{href:"https://api.elfsquad.io/quotation/1/quotations",children:"https://api.elfsquad.io/quotation/1/quotations"})]}),"\n",(0,i.jsxs)(t.p,{children:["This request requires a JSON body with optional properties.\nThe response body will contain the id of the newly created quotation.\nFor more information about the request and response bodies, refer to the provided api documentation. ",(0,i.jsx)(t.a,{href:"https://docs.elfsquad.io/apis/quotation",children:"https://docs.elfsquad.io/apis/quotation"})]}),"\n",(0,i.jsx)(t.h2,{id:"5-adding-the-configuration-to-the-quotation",children:"5. Adding the configuration to the quotation"}),"\n",(0,i.jsx)(t.p,{children:"In order to complete this step you need the id of the configuration that was created in step 2. You will also need the id of the quotation that was created in the previous step.\nTo add the configuration to the quotation the following request must be sent:"}),"\n",(0,i.jsxs)(t.p,{children:["PUT: ",(0,i.jsx)(t.a,{href:"https://api.elfsquad.io/configurator/3/configurator/addtoquotation",children:"https://api.elfsquad.io/configurator/3/configurator/addtoquotation"})]}),"\n",(0,i.jsx)(t.p,{children:"For this request a JSON body with the following format is required:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  "quotationId": "1ceb365d-7c0e-435f-8012-dd887707710b",\n  "configurationIds": ["747fe28d-fd35-4938-aac2-7a102b20196e"]\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["The value of quotationId should be replaced by the id of the quotation from the previous step.\nThe value of configurationIds should be an array containing the id of the configuration from step 2. Please note that adding multiple (unique) configurations in one request is supported.\nAfter the request completes, the configuration will be added to the quotation. The new quotation is immediately visable in the EMS.\nWant to change the status of your newly created quotation? Please refer to our documentation: ",(0,i.jsx)(t.a,{href:"https://support.elfsquad.io/hc/en-us/articles/9435941123484-Quotation-functions-in-API",children:"https://support.elfsquad.io/hc/en-us/articles/9435941123484-Quotation-functions-in-API"}),"."]})]})}function h(e={}){let{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},90953:function(e){e.exports=JSON.parse('{"permalink":"/blog/tutorial - using the API to create a configuration and add it to a quotation.","editUrl":"https://github.com/elfsquad/docs/edit/main/blog/2024-02-27-configure-api.md","source":"@site/blog/2024-02-27-configure-api.md","title":"Tutorial - Using the API to create a configuration and add it to a quotation.","description":"This guide explains how to start a new configuration, and update it, using the configurator API.","date":"2024-02-27T00:00:00.000Z","tags":[{"inline":true,"label":"automation","permalink":"/blog/tags/automation"},{"inline":true,"label":"configurator","permalink":"/blog/tags/configurator"}],"readingTime":4.96,"hasTruncateMarker":false,"authors":[{"name":"Anco Postma","title":"Tech lead @ Elfsquad","url":"https://github.com/AJJPostma","imageURL":"https://avatars.githubusercontent.com/u/15011154?v=4","key":null,"page":null}],"frontMatter":{"slug":"tutorial - using the API to create a configuration and add it to a quotation.","title":"Tutorial - Using the API to create a configuration and add it to a quotation.","author":"Anco Postma","author_title":"Tech lead @ Elfsquad","author_url":"https://github.com/AJJPostma","author_image_url":"https://avatars.githubusercontent.com/u/15011154?v=4","tags":["automation","configurator"]},"unlisted":false,"prevItem":{"title":"Tutorial - Using the API to add master data and configuration models.","permalink":"/blog/tutorial - using the API to add master data and configuration models."},"nextItem":{"title":"Tutorial - Integrate Sketchfab viewer with Elfsquad","permalink":"/blog/tutorial - sketchfab viewer"}}')}}]);