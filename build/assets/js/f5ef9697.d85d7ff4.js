"use strict";(self.webpackChunkelfsquad=self.webpackChunkelfsquad||[]).push([["57612"],{50121:function(e,t,n){n.r(t),n.d(t,{frontMatter:()=>l,default:()=>h,toc:()=>u,metadata:()=>i,assets:()=>d,contentTitle:()=>c});var i=JSON.parse('{"id":"configurator/guides/generating-2d-step-image","title":"\uD83D\uDCCA Generating 2D Step Images","description":"This guide covers the process of setting up and generating 2D step images within the EMS. You will learn how to use the API to retrieve metadata and construct the step image effectively.","source":"@site/docs/configurator/guides/generating-2d-step-image.md","sourceDirName":"configurator/guides","slug":"/configurator/guides/generating-2d-step-images","permalink":"/docs/configurator/guides/generating-2d-step-images","draft":false,"unlisted":false,"editUrl":"https://github.com/elfsquad/docs/edit/main/docs/configurator/guides/generating-2d-step-image.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"\uD83D\uDCCA Generating 2D Step Images","sidebar_position":1,"sidebar_label":"Generating 2D Step Images","slug":"./generating-2d-step-images","hide_table_of_contents":true},"sidebar":"configuratorSidebar","previous":{"title":"Visualization IFrame API","permalink":"/docs/configurator/Third-party-visualization"},"next":{"title":"Dynamic groups with Python","permalink":"/docs/configurator/guides/python-dynamic-groups"}}'),r=n(85893),a=n(50065),s=n(90291),o=n(88878);let l={title:"\uD83D\uDCCA Generating 2D Step Images",sidebar_position:1,sidebar_label:"Generating 2D Step Images",slug:"./generating-2d-step-images",hide_table_of_contents:!0},c="Generating 2D Step Images",d={},u=[{value:"1. Retrieve the <code>2dlayout</code>",id:"1-retrieve-the-2dlayout",level:3},{value:"2. Construct the step image",id:"2-construct-the-step-image",level:3},{value:"3. Result",id:"3-result",level:3}];function g(e){let t={code:"code",h1:"h1",h3:"h3",header:"header",p:"p",...(0,a.a)(),...e.components};return(0,r.jsxs)(s.k,{children:[(0,r.jsxs)(s.B,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"generating-2d-step-images",children:"Generating 2D Step Images"})}),(0,r.jsx)(t.p,{children:"This guide covers the process of setting up and generating 2D step images within the EMS. You will learn how to use the API to retrieve metadata and construct the step image effectively."})]}),(0,r.jsxs)(s.B,{highlight:"{1-3}",children:[(0,r.jsxs)(t.h3,{id:"1-retrieve-the-2dlayout",children:["1. Retrieve the ",(0,r.jsx)(t.code,{children:"2dlayout"})]}),(0,r.jsxs)(t.p,{children:["To begin, you must retrieve the ",(0,r.jsx)(t.code,{children:"2dlayout"})," from the designated endpoint.\nThis data structure contains URLs and z-index values essential for\nconstructing the step image. Ensure to include the ",(0,r.jsx)(t.code,{children:"stepId"})," in your\nquery to retrieve the correct layout."]})]}),(0,r.jsxs)(s.B,{highlight:"{8-15}",children:[(0,r.jsx)(t.h3,{id:"2-construct-the-step-image",children:"2. Construct the step image"}),(0,r.jsxs)(t.p,{children:["With the ",(0,r.jsx)(t.code,{children:"2dlayout"})," retrieved, you can now stack the images based on\ntheir z-values to construct the final step image. The example below\ndemonstrates how to use the HTML canvas element to achieve this."]})]}),(0,r.jsxs)(s.B,{highlight:"{5-6,16}",children:[(0,r.jsx)(t.h3,{id:"3-result",children:"3. Result"}),(0,r.jsx)(t.p,{children:"Following the steps above, you will be able to generate a 2D step image\nthat dynamically updates based on the configuration. This method ensures\nthat your visualizations are always current and accurate."})]}),(0,r.jsx)(o.default,{language:"js",children:`const configuratorContext = new ConfiguratorContext();
const layout2d = configuratorContext.getLayout2d();
const sortedLayout = layout2d.sort((a, b) => a.z - b.z);

const canvas = document.createElement('canvas');
const ctx = canvas.getContext('2d');

for(const item of layout) {
const img = new Image();
img.src = item.url;
img.onload = () => {
  ctx.drawImage(img, 0, 0);
};
}

const stepImage = canvas.toDataURL();`})]})}function h(e={}){let{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(g,{...e})}):g(e)}},34643:function(e,t,n){n.d(t,{Z:()=>r});var i=n(85893);function r(e){return(0,i.jsx)(i.Fragment,{children:e.children})}n(67294)},90291:function(e,t,n){n.d(t,{B:()=>s,k:()=>o});var i=n(67294),r=n(34643),a=n(88878);let s=e=>{let{children:t}=e;return i.createElement("div",null,t)},o=e=>{let{children:t}=e,[n,o]=(0,i.useState)(null),[c,d]=(0,i.useState)(""),[u,g]=(0,i.useState)(-1),h=i.Children.toArray(t).filter(e=>i.isValidElement(e)),m=h.find(e=>e.type===a.default||e.type===r.Z),p=h.filter(e=>e.type===s),f=i.useRef(null),v=p.map(()=>i.useRef(null)),y=()=>{if(!f.current)return;let e=f.current.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight;o(Math.floor(Math.max(0,Math.min(e.bottom,t)-Math.max(e.top,0)))-32)},x=e=>{var t;if(!(null==(t=p[e])?void 0:t.props.highlight)||e<0||e>=p.length||e==u||(g(e),d(p[e].props.highlight),!f.current))return;let n=f.current.getElementsByClassName("theme-code-block-highlighted-line");n.length>0&&setTimeout(()=>{f.current&&(f.current.scrollTop=n[0].offsetTop-24)},200)},w=()=>{let e=window.scrollY+l(),t=v.findIndex(t=>!!t.current&&t.current.offsetTop>e);t!=u&&x(t)};return(0,i.useEffect)(()=>(y(),window.removeEventListener("scroll",w),window.addEventListener("scroll",w,{passive:!0}),x(0),()=>window.removeEventListener("scroll",w)),[]),i.createElement("div",{className:"codedoc-container"},i.createElement("div",null,p.map((e,t)=>i.createElement("div",{key:t,ref:v[t],className:`codedoc-section ${u==t?"active":""}`,onClick:()=>x(t)},i.createElement(s,Object.assign({},e.props))))),i.createElement("div",{ref:f,style:{height:`${n}px`,top:`${l()}px`},className:"codedoc-code-container"},m&&i.createElement(a.default,Object.assign({},m.props,{metastring:c,key:c}))))},l=()=>{if("undefined"==typeof getComputedStyle)return 0;let e=getComputedStyle(document.documentElement).getPropertyValue("--ifm-navbar-height");return e?e.includes("px")?parseInt(e.replace("px","")):e.includes("rem")?Math.floor(parseInt(e.replace("rem",""))*parseFloat(getComputedStyle(document.documentElement).fontSize)):0:0}}}]);