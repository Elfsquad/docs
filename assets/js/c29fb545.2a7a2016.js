"use strict";(self.webpackChunkelfsquad=self.webpackChunkelfsquad||[]).push([[76403],{85236:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>c,frontMatter:()=>i,metadata:()=>r,toc:()=>l});var s=a(74848),d=a(28453);const i={title:"Visualization IFrame API",sidebar_position:3},t=void 0,r={id:"configurator/Third-party-visualization",title:"Visualization IFrame API",description:"With third party visualization, you can easily integrate Elfsquad with",source:"@site/docs/configurator/Third-party-visualization.md",sourceDirName:"configurator",slug:"/configurator/Third-party-visualization",permalink:"/docs/configurator/Third-party-visualization",draft:!1,unlisted:!1,editUrl:"https://github.com/elfsquad/docs/edit/main/docs/configurator/Third-party-visualization.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Visualization IFrame API",sidebar_position:3},sidebar:"configuratorSidebar",previous:{title:"Showroom IFrame API",permalink:"/docs/configurator/iframe-api"},next:{title:"Generating 2D Step Images",permalink:"/docs/configurator/guides/generating-2d-step-images"}},o={},l=[{value:"Events",id:"events",level:2},{value:"<code>elfsquad.configurationUpdated</code>",id:"elfsquadconfigurationupdated",level:3},{value:"<code>elfsquad.stepChanged</code>",id:"elfsquadstepchanged",level:3},{value:"Commands",id:"commands",level:2},{value:"<code>elfsquad.triggerConfigurationUpdated</code>",id:"elfsquadtriggerconfigurationupdated",level:3},{value:"<code>elfsquad.updateRequirement</code>",id:"elfsquadupdaterequirement",level:3},{value:"<code>elfsquad.updateRequirements</code>",id:"elfsquadupdaterequirements",level:3},{value:"<code>elfsquad.updateImageValue</code>",id:"elfsquadupdateimagevalue",level:3},{value:"<code>elfsquad.updateTextValue</code>",id:"elfsquadupdatetextvalue",level:3}];function u(e){const n={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["With third party visualization, you can easily integrate Elfsquad with\nexternal programs to visualize your configurations. For example, you can\nuse ",(0,s.jsx)("a",{href:"/blog/tutorial%20-%20verge3d%20viewer",children:"Verge3D"})," or ",(0,s.jsx)("a",{href:"/blog/tutorial%20-%20sketchfab%20viewer",children:"Sketchfab"}),"\nto enhance your user experience and showcase your products in a more\ncompelling way."]}),"\n",(0,s.jsx)(n.p,{children:"To embed a third party viewer in Elfsquad, an iframe is used.\nCommunication between Elfsquad and the viewer is accomplished using the\niframe postmessage API."}),"\n",(0,s.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,s.jsx)(n.p,{children:"Elfsquad sends several events to the embedded iframe, such as when a\nconfiguration is modified."}),"\n",(0,s.jsxs)(n.p,{children:["Each event consists of two properties: the ",(0,s.jsx)(n.code,{children:"name"})," property, which\nidentifies the type of event, and the ",(0,s.jsx)(n.code,{children:"args"})," property, which contains the\nrelevant data."]}),"\n",(0,s.jsx)(n.h3,{id:"elfsquadconfigurationupdated",children:(0,s.jsx)(n.code,{children:"elfsquad.configurationUpdated"})}),"\n",(0,s.jsx)(n.p,{children:"This event is sent whenever the configuration is modified."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"window.parent.addEventListener('message', function(e) {\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \n    if (e.data && e.data.name === 'elfsquad.configurationUpdated') {\n        const configuration = e.data.args;\n    }\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"elfsquadstepchanged",children:(0,s.jsx)(n.code,{children:"elfsquad.stepChanged"})}),"\n",(0,s.jsx)(n.p,{children:"This event is sent whenever the user changes step."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"window.parent.addEventListener('message', function(e) {\n    if (e.data && e.data.name === 'elfsquad.stepChanged') {\n        const step = e.data.args;\n    }\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"commands",children:"Commands"}),"\n",(0,s.jsxs)(n.p,{children:["You can also instruct Elfsquad from within the viewer by sending\nmessages to it. These messages are similar to the event messages and\ncontain a ",(0,s.jsx)(n.code,{children:"name"})," property for the name of the message and an ",(0,s.jsx)(n.code,{children:"args"})," property\nfor the message arguments."]}),"\n",(0,s.jsx)(n.p,{children:"By sending these messages, you can instruct Elfsquad to perform various\nactions, such as updating the configuration."}),"\n",(0,s.jsx)(n.h3,{id:"elfsquadtriggerconfigurationupdated",children:(0,s.jsx)(n.code,{children:"elfsquad.triggerConfigurationUpdated"})}),"\n",(0,s.jsxs)(n.p,{children:["This triggers a ",(0,s.jsx)(n.code,{children:"elfsquad.configurationUpdated"})," event to be send,\nwithout updating the configuration."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"window.top.postMessage({\n    name: 'elfsquad.triggerConfigurationUpdated'\n}, '*')\n"})}),"\n",(0,s.jsx)(n.h3,{id:"elfsquadupdaterequirement",children:(0,s.jsx)(n.code,{children:"elfsquad.updateRequirement"})}),"\n",(0,s.jsx)(n.p,{children:"This executes an update requirement API call."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"window.top.postMessage({\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \n    name: 'elfsquad.updateRequirement',\n    args: {\n        nodeId: {nodeId},\n        value: {value}, \n        isSelection: false\n    },\n}, '*');\n"})}),"\n",(0,s.jsx)(n.h3,{id:"elfsquadupdaterequirements",children:(0,s.jsx)(n.code,{children:"elfsquad.updateRequirements"})}),"\n",(0,s.jsx)(n.p,{children:"This executes an API call to update multiple requirements."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"window.top.postMessage({\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \n    name: 'elfsquad.updateRequirements',\n    args: {\n        ignoreConflicts: false,\n        includeSearchbarResults: false,\n        requirements: [\n            { nodeId: {nodeId}, value: {value}, isSelection: false },\n            { nodeId: {nodeId}, value: {value}, isSelection: false },\n            { nodeId: {nodeId}, value: {value}, isSelection: false },\n        ],\n    },\n}, '*');\n"})}),"\n",(0,s.jsx)(n.h3,{id:"elfsquadupdateimagevalue",children:(0,s.jsx)(n.code,{children:"elfsquad.updateImageValue"})}),"\n",(0,s.jsx)(n.p,{children:"This command uploads an image and assigns it as a image value to a node."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"window.top.postMessage({\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \n    name: 'elfsquad.updateImageValue',\n    args: {\n        nodeId: {nodeId},\n        image: {base64EncodedImageData}\n    },\n}, '*');\n"})}),"\n",(0,s.jsx)(n.h3,{id:"elfsquadupdatetextvalue",children:(0,s.jsx)(n.code,{children:"elfsquad.updateTextValue"})}),"\n",(0,s.jsx)(n.p,{children:"This command updates the text value of a node"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"window.top.postMessage({\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \n    name: 'elfsquad.updateTextValue',\n    args: {\n        nodeId: {nodeId},\n        textValue: 'text_value',\n    },\n}, '*');\n\n"})})]})}function c(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);